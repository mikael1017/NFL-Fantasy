!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.ReactTableContainer=t(e.React,e.ReactDOM)}(this,function(m,u){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function n(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var M=function(){return(M=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function w(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(o=r.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}var y=function(t){function e(e){var s=t.call(this,e)||this;return s.minHeight=15,s.onMouseDown=function(e){e.preventDefault(),s.isMoving=!0,s.previousMoveClientY=e.clientY},s.onMouseMove=function(e){var t=s.props.scrollTo,n=s.state,o=n.containerHeight,i=n.theadHeight,r=n.scrollbarHeight;if(s.isMoving){e.preventDefault();var a=e.clientY,l=o-i-r;t=Math.max(0,Math.min(t=l?(l*t+(a-s.previousMoveClientY))/l:0,1)),s.previousMoveClientY=a,s.props.onScroll(t)}},s.onMouseUp=function(e){s.isMoving&&(e.preventDefault(),s.isMoving=!1,s.previousMoveClientY=0)},s.onMouseOver=function(){s.setState({focused:!0})},s.onMouseOut=function(){s.setState({focused:!1})},s.state={focused:!1,containerHeight:0,tableHeight:0,theadHeight:0,scrollbarHeight:0},s.isMoving=!1,s.previousMoveClientY=0,s}return n(e,t),e.prototype.componentDidMount=function(){this.calculateDimensions(),this.scrollbarRef.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},e.prototype.componentWillUnmount=function(){this.scrollbarRef.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},e.prototype.componentDidUpdate=function(){var e=this.props,t=e.tableRef,n=this.state,o=n.containerHeight,i=n.tableHeight,r=e.containerRef.getBoundingClientRect().height,a=u.findDOMNode(t).getBoundingClientRect().height;o===r&&i===a||this.calculateDimensions()},e.prototype.render=function(){var t=this,e=this.props,n=e.style,o=e.scrollTo,i=this.state,r=i.focused,a=i.containerHeight,l=i.theadHeight,s=i.scrollbarHeight,h={display:!!e.tableRef&&a-l<i.tableHeight-l?"block":"none",boxSizing:"border-box",position:"absolute",top:l,right:0,bottom:0,backgroundColor:"#E3E5EB",width:8};h=n?M({},h,r?n.backgroundFocus:n.background):h;var c={boxSizing:"border-box",position:"absolute",top:(a-l-s)*o,right:0,backgroundColor:"#888C97",borderRadius:4,width:8,height:s};return c=n?M({},c,r?n.foregroundFocus:n.foreground):c,m.createElement("div",{style:h,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},m.createElement("div",{ref:function(e){return t.scrollbarRef=e},style:c}))},e.prototype.calculateDimensions=function(){var e=this.props,t=e.containerRef,n=e.tableRef;if(t&&n){var o=t.getBoundingClientRect().height,i=u.findDOMNode(n),r=i.getBoundingClientRect().height,a=i.querySelector("thead").getBoundingClientRect().height,l=r-a,s=o-a,h=l?Math.pow(s,2)/l:0;this.setState({containerHeight:o,tableHeight:r,theadHeight:a,scrollbarHeight:h=Math.max(this.minHeight,Math.min(h,s))})}},e}(m.Component),S=function(t){function e(e){var l=t.call(this,e)||this;return l.minHeight=15,l.onMouseDown=function(e){e.preventDefault(),l.isMoving=!0,l.previousMoveClientX=e.clientX},l.onMouseMove=function(e){var t=l.props.scrollTo,n=l.state,o=n.containerWidth,i=n.scrollbarWidth;if(l.isMoving){e.preventDefault();var r=e.clientX,a=o-i;t=Math.max(0,Math.min(t=a?(a*t+(r-l.previousMoveClientX))/a:0,1)),l.previousMoveClientX=r,l.props.onScroll(t)}},l.onMouseUp=function(e){l.isMoving&&(e.preventDefault(),l.isMoving=!1,l.previousMoveClientX=0)},l.onMouseOver=function(){l.setState({focused:!0})},l.onMouseOut=function(){l.setState({focused:!1})},l.state={focused:!1,containerWidth:0,tableWidth:0,scrollbarWidth:0},l.isMoving=!1,l.previousMoveClientX=0,l}return n(e,t),e.prototype.componentDidMount=function(){this.calculateDimensions(),this.scrollbarRef.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},e.prototype.componentWillUnmount=function(){this.scrollbarRef.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},e.prototype.componentDidUpdate=function(){var e=this.props,t=e.tableRef,n=this.state,o=n.containerWidth,i=n.tableWidth,r=e.containerRef.getBoundingClientRect().width,a=u.findDOMNode(t).getBoundingClientRect().width;o===r&&i===a||this.calculateDimensions()},e.prototype.render=function(){var t=this,e=this.props,n=e.style,o=e.scrollTo,i=this.state,r=i.focused,a=i.containerWidth,l=i.scrollbarWidth,s={display:!!e.tableRef&&a<i.tableWidth?"block":"none",boxSizing:"border-box",position:"absolute",right:0,bottom:0,left:0,backgroundColor:"#E3E5EB",height:8};s=n?M({},s,r?n.backgroundFocus:n.background):s;var h={boxSizing:"border-box",position:"absolute",bottom:0,left:(a-l)*o,backgroundColor:"#888C97",borderRadius:4,width:l,height:8};return h=n?M({},h,r?n.foregroundFocus:n.foreground):h,m.createElement("div",{style:s,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},m.createElement("div",{ref:function(e){return t.scrollbarRef=e},style:h}))},e.prototype.calculateDimensions=function(){var e=this.props,t=e.containerRef,n=e.tableRef;if(t&&n){var o=t.getBoundingClientRect().width,i=u.findDOMNode(n).getBoundingClientRect().width,r=i?Math.pow(o,2)/i:0;this.setState({containerWidth:o,tableWidth:i,scrollbarWidth:r=Math.max(this.minHeight,Math.min(r,o))})}},e}(m.Component);return function(t){function e(e){var f=t.call(this,e)||this;return f.tableId="main-table",f.headerTableId="header-table",f.headerRelatedHTMLElements=["colgroup","thead"],f.timeoutId=null,f.onWindowResize=function(){clearTimeout(f.timeoutId),f.timeoutId=setTimeout(f.reevaluateDimensions,16)},f.refreshHeaders=function(){var e=u.findDOMNode(f.headerTableRef).querySelector("thead > tr:first-child"),t=u.findDOMNode(f.tableRef).querySelector("thead > tr:first-child");if(e&&t){for(var n=[],o=0;o<t.children.length;o++)n.push(t.children.item(o).getBoundingClientRect().width);for(o=0;o<t.children.length;o++){var i=e.children.item(o);i.style.boxSizing="border-box",i.style.minWidth=n[o]+"px"}}},f.reevaluateDimensions=function(){var e=f.state,t=e.containerWidth,n=e.containerHeight,o=e.tableWidth,i=e.tableHeight,r=f.containerRef.getBoundingClientRect(),a=u.findDOMNode(f.tableRef).getBoundingClientRect(),l=r.width,s=r.height,h=a.width,c=a.height;t===l&&n===s&&o===h&&i===c||f.applyDimensions({containerWidth:l,containerHeight:s,tableWidth:h,tableHeight:c})},f.onWheel=function(e){e.preventDefault();var t=f.state,n=t.containerWidth,o=t.tableWidth,i=t.tableMarginTop,r=t.tableMarginLeft,a=e.deltaY,l=e.deltaX;1===e.deltaMode&&(a*=10,l*=10);var s=Math.max(0,t.tableHeight-t.containerHeight),h=i+a,c=Math.max(0,o-n),u=r+l;f.setWindowScroll(s,h,c,u),f.setState({tableMarginTop:i=Math.max(0,Math.min(h,s)),verticalPercentageScrolled:s?i/s:0,tableMarginLeft:r=Math.max(0,Math.min(u,c)),horizontalPercentageScrolled:c?r/c:0})},f.onTouchStart=function(e){f.setState({isMoving:!0,previousSwipeClientX:e.changedTouches[0].clientX,previousSwipeClientY:e.changedTouches[0].clientY})},f.onTouchMove=function(e){e.preventDefault();var t=f.state,n=t.containerWidth,o=t.tableWidth,i=t.tableMarginTop,r=t.tableMarginLeft,a=t.previousSwipeClientX,l=t.previousSwipeClientY;if(t.isMoving){var s=Math.max(0,t.tableHeight-t.containerHeight),h=e.changedTouches[0].clientY,c=i+(l-h),u=Math.max(0,o-n),d=e.changedTouches[0].clientX,p=r+(a-d);f.setWindowScroll(s,c,u,p),l=h,f.setState({tableMarginTop:i=Math.max(0,Math.min(c,s)),verticalPercentageScrolled:s?i/s:0,tableMarginLeft:r=Math.max(0,Math.min(p,u)),horizontalPercentageScrolled:u?r/u:0,previousSwipeClientY:l,previousSwipeClientX:a=d})}},f.onTouchEnd=function(e){f.setState({isMoving:!1,previousSwipeClientX:0,previousSwipeClientY:0})},f.onVerticalScroll=function(e){var t=f.state,n=t.tableHeight-t.containerHeight;f.setState({tableMarginTop:Math.max(0,Math.min(e*n,n)),verticalPercentageScrolled:e})},f.onHorizontalScroll=function(e){var t=f.state,n=t.tableWidth-t.containerWidth;f.setState({tableMarginLeft:Math.max(0,Math.min(e*n,n)),horizontalPercentageScrolled:e})},f.state={containerWidth:0,containerHeight:0,tableWidth:0,tableHeight:0,tableMarginTop:0,verticalPercentageScrolled:0,tableMarginLeft:0,horizontalPercentageScrolled:0,isMoving:!1,previousSwipeClientX:0,previousSwipeClientY:0},f}return n(e,t),e.prototype.componentDidMount=function(){this.tableElement=u.findDOMNode(this.tableRef),this.tableElement.addEventListener("wheel",this.onWheel),this.tableElement.addEventListener("touchstart",this.onTouchStart),this.tableElement.addEventListener("touchmove",this.onTouchMove),this.tableElement.addEventListener("touchend",this.onTouchEnd),this.tableElement.addEventListener("touchcancel",this.onTouchEnd),window.addEventListener("resize",this.onWindowResize);var e=this.containerRef.getBoundingClientRect(),t=this.tableElement.getBoundingClientRect();this.applyDimensions({containerWidth:e.width,containerHeight:e.height,tableWidth:t.width,tableHeight:t.height})},e.prototype.componentWillUnmount=function(){this.tableElement.removeEventListener("wheel",this.onWheel),this.tableElement.removeEventListener("touchstart",this.onTouchStart),this.tableElement.removeEventListener("touchmove",this.onTouchMove),this.tableElement.removeEventListener("touchend",this.onTouchEnd),this.tableElement.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("resize",this.onWindowResize)},e.prototype.componentDidUpdate=function(){this.refreshHeaders(),this.reevaluateDimensions()},e.prototype.render=function(){var t=this,e=this.props,n=e.children,o=e.className,i=e.customHeader,r=e.scrollbarStyle,a=this.state,l=a.tableMarginTop,s=a.verticalPercentageScrolled,h=a.tableMarginLeft,c=a.horizontalPercentageScrolled,u={ref:function(e){return t.containerRef=e},style:M({},e.style,{boxSizing:"border-box",position:"relative",display:"inline-block",overflow:"hidden",width:e.width,height:e.height}),className:o},d=m.Children.only(n),p=M({},d.props,{ref:function(e){return t.tableRef=e},"data-rtc-id":this.tableId,style:M({},d.props.style,{borderSpacing:0,marginTop:-l,marginLeft:-h})}),f=M({},d.props,{ref:function(e){return t.headerTableRef=e},"data-rtc-id":this.headerTableId,style:M({},d.props.style,{borderSpacing:0,position:"absolute",top:0,left:-h,zIndex:1}),role:"presentation","aria-hidden":"true"}),v=m.Children.toArray(d.props.children),g=i?function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}(this.headerRelatedHTMLElements,i):this.headerRelatedHTMLElements,b=v.filter(function(e){return-1!=g.indexOf(e.type)});return m.createElement("div",M({},u),m.cloneElement(d,f,b),m.cloneElement(d,p),m.createElement(y,{style:r,containerRef:this.containerRef,tableRef:this.tableRef,scrollTo:s,onScroll:this.onVerticalScroll}),m.createElement(S,{style:r,containerRef:this.containerRef,tableRef:this.tableRef,scrollTo:c,onScroll:this.onHorizontalScroll}))},e.prototype.applyDimensions=function(e){var t=this.state,n=t.tableMarginTop,o=t.tableMarginLeft,i=e.tableHeight-e.containerHeight,r=e.tableWidth-e.containerWidth;this.setState({containerWidth:e.containerWidth,containerHeight:e.containerHeight,tableWidth:e.tableWidth,tableHeight:e.tableHeight,tableMarginTop:n=Math.max(0,Math.min(n,i)),verticalPercentageScrolled:i?n/i:0,tableMarginLeft:o=Math.max(0,Math.min(o,r)),horizontalPercentageScrolled:r?o/r:0})},e.prototype.setWindowScroll=function(e,t,n,o){var i=0,r=0;t<0?r=t:e<t&&(r=t-e),o<0?i=o:n<o&&(i=o-n),window.scrollBy(i,r)},e}(m.Component)});
